total=$(xe vm-list is-control-domain=false | grep uuid | awk '{print $5}' | while read uuid; do
    name=$(xe vm-param-get uuid=$uuid param-name=name-label)
    os=$(xe vm-param-get uuid=$uuid param-name=os-version)
    echo "$os" | grep -qi "distro: centos" || continue
    echo "$os" | grep -qi "major: 7" || continue
    echo "$name" | grep -qi "template" && continue
    echo "$name"
done | wc -l)

abc=$(xe vm-list is-control-domain=false | grep uuid | awk '{print $5}' | while read uuid; do
    name=$(xe vm-param-get uuid=$uuid param-name=name-label)
    os=$(xe vm-param-get uuid=$uuid param-name=os-version)
    echo "$os" | grep -qi "distro: centos" || continue
    echo "$os" | grep -qi "major: 7" || continue
    echo "$name" | grep -qi "template" && continue
    echo "$name" | grep -qi "abc"
done | wc -l)

def=$(xe vm-list is-control-domain=false | grep uuid | awk '{print $5}' | while read uuid; do
    name=$(xe vm-param-get uuid=$uuid param-name=name-label)
    os=$(xe vm-param-get uuid=$uuid param-name=os-version)
    echo "$os" | grep -qi "distro: centos" || continue
    echo "$os" | grep -qi "major: 7" || continue
    echo "$name" | grep -qi "template" && continue
    echo "$name" | grep -qi "def"
done | wc -l)

echo "Total CentOS 7 VMs: $total"
echo "CentOS 7 VMs with 'abc': $abc"
echo "CentOS 7 VMs with 'def': $def"
