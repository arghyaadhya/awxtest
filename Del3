#!/bin/bash

# Input file
input_file="input.txt"

# Output file
output_file="output.txt"

# Pattern to match
pattern="your_pattern"

awk -v pat="$pattern" '
BEGIN { delete_above = 0; delete_below = 0; }
{
    # Handle deletion for lines above
    if (delete_above) {
        if ($0 == "") {
            delete_above = 0; # Stop deleting above when a blank line is found
        } else {
            next; # Skip this line
        }
    }

    # If this line matches the pattern
    if ($0 ~ pat) {
        # Start deleting lines above and below
        delete_above = 1;
        delete_below = 1;
        next; # Skip the matched line
    }

    # Handle deletion for lines below
    if (delete_below) {
        if ($0 == "") {
            delete_below = 0; # Stop deleting below when a blank line is found
        }
        next; # Skip this line
    }

    # Print lines that are not marked for deletion
    print;
}
' "$input_file" > "$output_file"

echo "Processed file saved as $output_file"
