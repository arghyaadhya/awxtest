#!/bin/bash

# Input file
input_file="input.txt"

# Output file
output_file="output.txt"

# Pattern to match
pattern="your_pattern"

awk -v pat="$pattern" '
BEGIN { delete_above = 0; delete_below = 0; }
{
    if (delete_above) {
        if ($0 == "") {
            delete_above = 0; # Stop deleting when a blank line is encountered above
        } else {
            buffer = ""; # Clear buffer as we skip the line
            next;        # Skip this line
        }
    }

    if (delete_below) {
        if ($0 == "") {
            delete_below = 0; # Stop deleting when a blank line is encountered below
        }
        next; # Skip this line
    }

    # If the line matches the pattern
    if ($0 ~ pat) {
        delete_above = 1; # Start deleting lines above
        delete_below = 1; # Start deleting lines below
        next;             # Skip the matched line
    }

    # Buffer lines not marked for deletion
    buffer = buffer ? buffer ORS $0 : $0;
}

END {
    if (buffer) print buffer;
}' "$input_file" > "$output_file"

echo "Processed file saved as $output_file"
